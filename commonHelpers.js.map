{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n   searchForm: document.querySelector('.search-form'),\n   galleryList: document.querySelector('.gallery'),\n   loader: document.querySelector('.loader'),\n}\n\nlet lightbox;\nrefs.loader.style.display = 'none';\n\n\nfunction fetchImages(query){\n    const API_KEY = '42192199-b3b6ebcf3d1600f471f1bd878';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const url = `${BASE_URL}?${params}`;\n    \n   return fetch(url).then(res => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          const myError = new Error(`${res.status}`);\n          throw myError;\n        }\n      });\n\n};\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    refs.loader.style.display = 'block';\n    refs.galleryList.innerHTML = '';\n\n    const query = e.target.elements.query.value;\n\n    fetchImages(query).then(data => {\n      createMarkup(data.hits);\n    })\n    .catch( err =>{\n      console.log(`Error fetching images: ${err}`);\n    }\n  )\n  .finally(() =>{\n    refs.searchForm.reset();\n    lightbox.refresh();\n    refs.loader.style.display = 'none';\n  });\n  };\n\n\n  function createMarkup(arr){\n      if (arr.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: 'red',\n          messageColor: 'white',});\n      }\n      \n    const markup =arr.map(galleryTemplate).join('');\n    refs.galleryList.innerHTML = markup;\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n  }\n\n function galleryTemplate({webformatURL, largeImageURL, tags, likes, views, comments,  downloads}){\n    return `<li class=\"gallery-list\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"img-gallery\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n    <figcaption class=\"info-img\">\n      \n      <div>\n        <h3>Views</h3>\n        <p>${likes}</p>\n      </div>\n\n      <div>\n        <h3>Views</h3>\n        <p>${views}</p>\n      </div>\n\n      <div>\n        <h3>Comments</h3>\n        <p>${comments}</p>\n      </div>\n\n      <div>\n        <h3>Downloads</h3>\n        <p>${downloads}</p>\n      </div>\n\n    </figcaption>\n  </li>`\n  };\n"],"names":["refs","lightbox","fetchImages","query","API_KEY","BASE_URL","params","url","res","onFormSubmit","e","data","createMarkup","err","arr","iziToast","markup","galleryTemplate","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAO,CACV,WAAY,SAAS,cAAc,cAAc,EACjD,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,CAC3C,EAEA,IAAIC,EACJD,EAAK,OAAO,MAAM,QAAU,OAG5B,SAASE,EAAYC,EAAM,CACvB,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAEKI,EAAM,GAAGF,KAAYC,IAE5B,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CACzB,GAAIA,EAAI,GACN,OAAOA,EAAI,OAGX,MADgB,IAAI,MAAM,GAAGA,EAAI,QAAQ,CAGnD,CAAO,CAEP,CAEAR,EAAK,WAAW,iBAAiB,SAAUS,CAAY,EAEvD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChBV,EAAK,OAAO,MAAM,QAAU,QAC5BA,EAAK,YAAY,UAAY,GAE7B,MAAMG,EAAQO,EAAE,OAAO,SAAS,MAAM,MAEtCR,EAAYC,CAAK,EAAE,KAAKQ,GAAQ,CAC9BC,EAAaD,EAAK,IAAI,CAC5B,CAAK,EACA,MAAOE,GAAM,CACZ,QAAQ,IAAI,0BAA0BA,GAAK,CAC5C,CACF,EACA,QAAQ,IAAK,CACZb,EAAK,WAAW,QAChBC,EAAS,QAAO,EAChBD,EAAK,OAAO,MAAM,QAAU,MAChC,CAAG,CAEH,CAEE,SAASY,EAAaE,EAAI,CAClBA,EAAI,SAAW,GACjBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,EAG7B,MAAMC,EAAQF,EAAI,IAAIG,CAAe,EAAE,KAAK,EAAE,EAC9CjB,EAAK,YAAY,UAAYgB,EAC7Bf,EAAW,IAAIiB,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACpB,CAAK,CACF,CAEF,SAASD,EAAgB,CAAC,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAW,UAAAC,CAAS,EAAE,CAC9F,MAAO;AAAA,oCACyBL,oCAAgDD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,aAK7FC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA,QAKb"}