{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n   searchForm: document.querySelector('.search-form'),\n   galleryList: document.querySelector('.gallery'),\n   loader: document.querySelector('.loader'),\n}\nrefs.loader.style.display = 'none';\nlet lightbox;\n\nfunction fetchImages(query){\n    const API_KEY = '42192199-b3b6ebcf3d1600f471f1bd878';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const url = `${BASE_URL}?${params}`;\n    \n   return fetch(url).then(res => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          const myError = new Error(`${res.status}`);\n          throw myError;\n        }\n      });\n\n};\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    refs.galleryList.innerHTML = '';\n    refs.loader.style.display = 'block';\n\n    const query = e.target.elements.query.value;\n\n    fetchImages(query).then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: 'red',\n          messageColor: 'white',});\n      };\n\n      createMarkup(data.hits);\n      \n    })\n    .catch( err =>{\n      console.log(`Error fetching images: ${err}`);\n    }\n  )\n  .finally(() =>{\n    refs.searchForm.reset();\n    lightbox.refresh();\n    refs.loader.style.display = 'none';\n  });\n  };\n\n  function galleryTemplate({webformatURL, largeImageURL, tags, likes, views, comments,  downloads}){\n    return `<li class=\"gallery-list\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"img-gallery\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n    <figcaption class=\"info-img\">\n      \n      <div>\n        <h3>Views</h3>\n        <p>${likes}</p>\n      </div>\n\n      <div>\n        <h3>Views</h3>\n        <p>${views}</p>\n      </div>\n\n      <div>\n        <h3>Comments</h3>\n        <p>${comments}</p>\n      </div>\n\n      <div>\n        <h3>Downloads</h3>\n        <p>${downloads}</p>\n      </div>\n\n    </figcaption>\n  </li>`\n  };\n\n  function createMarkup(arr){\n    const markup =arr.map(galleryTemplate).join('');\n    refs.galleryList.innerHTML = markup;\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n  }\n\n\n"],"names":["refs","lightbox","fetchImages","query","API_KEY","BASE_URL","params","url","res","onFormSubmit","e","data","iziToast","createMarkup","err","galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","arr","markup","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAO,CACV,WAAY,SAAS,cAAc,cAAc,EACjD,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,CAC3C,EACAA,EAAK,OAAO,MAAM,QAAU,OAC5B,IAAIC,EAEJ,SAASC,EAAYC,EAAM,CACvB,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAEKI,EAAM,GAAGF,KAAYC,IAE5B,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CACzB,GAAIA,EAAI,GACN,OAAOA,EAAI,OAGX,MADgB,IAAI,MAAM,GAAGA,EAAI,QAAQ,CAGnD,CAAO,CAEP,CAEAR,EAAK,WAAW,iBAAiB,SAAUS,CAAY,EAEvD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChBV,EAAK,YAAY,UAAY,GAC7BA,EAAK,OAAO,MAAM,QAAU,QAE5B,MAAMG,EAAQO,EAAE,OAAO,SAAS,MAAM,MAEtCR,EAAYC,CAAK,EAAE,KAAKQ,GAAQ,CAC1BA,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,EAG3BC,EAAaF,EAAK,IAAI,CAE5B,CAAK,EACA,MAAOG,GAAM,CACZ,QAAQ,IAAI,0BAA0BA,GAAK,CAC5C,CACF,EACA,QAAQ,IAAK,CACZd,EAAK,WAAW,QAChBC,EAAS,QAAO,EAChBD,EAAK,OAAO,MAAM,QAAU,MAChC,CAAG,CAEH,CACE,SAASe,EAAgB,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAW,UAAAC,CAAS,EAAE,CAC/F,MAAO;AAAA,oCACyBL,oCAAgDD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,aAK7FC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA,QAMb,CACE,SAAST,EAAaU,EAAI,CACxB,MAAMC,EAAQD,EAAI,IAAIR,CAAe,EAAE,KAAK,EAAE,EAC9Cf,EAAK,YAAY,UAAYwB,EAC7BvB,EAAW,IAAIwB,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACpB,CAAK,CACL"}