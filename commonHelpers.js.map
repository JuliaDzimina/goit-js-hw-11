{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n   searchForm: document.querySelector('.search-form'),\n    galleryList: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n}\n\nlet lightbox;\n\nfunction fetchImages(query){\n    const API_KEY = '42192199-b3b6ebcf3d1600f471f1bd878';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const url = `${BASE_URL}?${params}`;\n    \n   return fetch(url).then(res => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          const myError = new Error(`${res.status}`);\n          throw myError;\n        }\n      });\n\n};\n\nrefs.searchForm.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    const query = e.target.elements.query.value;\n \n    fetchImages(query).then(data => {\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: 'red',\n          messageColor: 'white',});\n      }\n      createMarkup(data.hits);\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n    })\n    .catch( err =>{\n      console.log(`Error fetching images: ${err}`);\n    }\n  )\n  .finally(\n    refs.searchForm.reset()\n  );\n  \n    e.target.reset();\n  };\n\n  function galleryTemplate({webformatURL, largeImageURL, tags, likes, views, comments,  downloads}){\n    return `<li class=\"gallery-list\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"img-gallery\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n    <figcaption class=\"info-img\">\n      \n      <div>\n        <h3>Views</h3>\n        <p>${likes}</p>\n      </div>\n\n      <div>\n        <h3>Views</h3>\n        <p>${views}</p>\n      </div>\n\n      <div>\n        <h3>Comments</h3>\n        <p>${comments}</p>\n      </div>\n\n      <div>\n        <h3>Downloads</h3>\n        <p>${downloads}</p>\n      </div>\n\n    </figcaption>\n  </li>`\n\n  };\n\n  function imagesTemp(img){\n    return img.map(galleryTemplate).join('')\n  }\n\n\n  function createMarkup(arr){\n    const markup = imagesTemp(arr);\n    refs.galleryList.innerHTML = markup;\n\n  }\n\n\n"],"names":["refs","fetchImages","query","API_KEY","BASE_URL","params","url","res","onFormSubmit","e","data","iziToast","createMarkup","SimpleLightbox","err","galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemp","img","arr","markup"],"mappings":"6vBAMA,MAAMA,EAAO,CACV,WAAY,SAAS,cAAc,cAAc,EAChD,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAIA,SAASC,EAAYC,EAAM,CACvB,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAEKI,EAAM,GAAGF,KAAYC,IAE5B,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CACzB,GAAIA,EAAI,GACN,OAAOA,EAAI,OAGX,MADgB,IAAI,MAAM,GAAGA,EAAI,QAAQ,CAGnD,CAAO,CAEP,CAEAP,EAAK,WAAW,iBAAiB,SAAUQ,CAAY,EAEvD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChB,MAAMP,EAAQO,EAAE,OAAO,SAAS,MAAM,MAEtCR,EAAYC,CAAK,EAAE,KAAKQ,GAAQ,CAE1BA,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OAAO,CAAE,EAE3BC,EAAaF,EAAK,IAAI,EACX,IAAIG,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KACtB,CAAO,CACP,CAAK,EACA,MAAOC,GAAM,CACZ,QAAQ,IAAI,0BAA0BA,GAAK,CAC5C,CACF,EACA,QACCd,EAAK,WAAW,MAAO,CAC3B,EAEIS,EAAE,OAAO,OAEb,CACE,SAASM,EAAgB,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAW,UAAAC,CAAS,EAAE,CAC/F,MAAO;AAAA,oCACyBL,oCAAgDD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,aAK7FC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKAC;AAAA;AAAA;AAAA;AAAA,QAOb,CACE,SAASC,EAAWC,EAAI,CACtB,OAAOA,EAAI,IAAIT,CAAe,EAAE,KAAK,EAAE,CACxC,CAGD,SAASH,EAAaa,EAAI,CACxB,MAAMC,EAASH,EAAWE,CAAG,EAC7BzB,EAAK,YAAY,UAAY0B,CAEjC"}